

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Overview &mdash; Kids First Data Ingest Libraries  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/other.css" type="text/css" />
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="install.html" />
    <link rel="stylesheet" href="https://kids-first.github.io/kf-sphinx-docs-theme/sphinx_kidsfirst_theme/static/css/kidsfirst.css" type="text/css" />
 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#">
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="design/overview.html">Design Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference/index.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Kids First Data Ingest Libraries</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <img alt="Kids First Data Ingest Library" src="_images/logo.png" />
<hr class="docutils" />
<p>Library Code Repository: <a class="reference external" href="https://github.com/kids-first/kf-lib-data-ingest">https://github.com/kids-first/kf-lib-data-ingest</a></p>
<section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>The Kids First Data Ingest Library is both an ETL (extract, transform, load)
framework and a library that standardizes the ingestion of raw Kids First study
data into target Kids First services.</p>
<section id="framework-and-library">
<h2>Framework and Library<a class="headerlink" href="#framework-and-library" title="Permalink to this headline">¶</a></h2>
<p>Since this is a library as well as a framework, there are components of the
<code class="docutils literal notranslate"><span class="pre">kf_lib_data_ingest</span></code> package that can be used as standalone tools or
utilities. The <code class="docutils literal notranslate"><span class="pre">ExtractStage</span></code> for example can be used as a standalone tool
for data selection and mapping (see <a class="reference internal" href="tutorial/extract/index.html#tutorial-extract-stage"><span class="std std-ref">Extract Stage</span></a> for details).
Anything in <code class="docutils literal notranslate"><span class="pre">kf_lib_data_ingest.utilities</span></code> can be used as a standalone tool.</p>
<p>Additionally, there are a handful of helper functions in
<code class="docutils literal notranslate"><span class="pre">kf_lib_data_ingest.common.pandas_utils</span></code> that could be used outside of the
framework for data wrangling tasks. See &lt;TODO&gt; for details.</p>
</section>
<section id="ingest-app">
<h2>Ingest App<a class="headerlink" href="#ingest-app" title="Permalink to this headline">¶</a></h2>
<p>The library comes with a built-in command-line-interface-based (CLI) app
which is the primary user interface for executing the ingest pipeline.
Most users will use this app to create new ingest packages, test packages,
and ingest Kids First study datasets into the Kids First Data Service.</p>
</section>
<section id="ingest-packages">
<h2>Ingest Packages<a class="headerlink" href="#ingest-packages" title="Permalink to this headline">¶</a></h2>
<p>In order to use this library to ingest a study, users must create ingest
packages which contain all of the necessary configuration defining basic ingest
input parameters and also how to extract and transform data.</p>
</section>
<section id="ingest-pipeline">
<h2>Ingest Pipeline<a class="headerlink" href="#ingest-pipeline" title="Permalink to this headline">¶</a></h2>
<figure class="align-default" id="id1">
<a class="reference external image-reference" href="_images/ingest-pipeline.png"><img alt="Ingest Pipeline Overview" src="_images/ingest-pipeline.png" /></a>
<figcaption>
<p><span class="caption-text">Overview of the ingest pipeline</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="users">
<h3>Users<a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h3>
<p>Users of the ingest system will likely fall into 3 categories:</p>
<ol class="arabic simple">
<li><p><strong>Ingest Operator</strong></p>
<ul class="simple">
<li><p>Will likely just be running existing ingest packages</p></li>
<li><p>May need to learn how to modify configuration by inspection of existing
ingest package configurations</p></li>
</ul>
</li>
<li><p><strong>Ingest Package Developer</strong></p>
<ul class="simple">
<li><p>Understands how to create new ingest packages and modify existing ones</p></li>
<li><p>Knows Python well and likely knows Pandas fairly well</p></li>
</ul>
</li>
<li><p><strong>Target Service Plugin Developer</strong></p>
<ul class="simple">
<li><p>Understands the intricacies of how to query and submit data to their
target service</p></li>
<li><p>Understands the Load process and plugin API defined in this documentation
and explored in existing target service plugins</p></li>
<li><p>Knows Python well and likely knows Pandas fairly well</p></li>
</ul>
</li>
</ol>
</section>
<section id="inputs">
<h3>Inputs<a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>Local or remote source data files</strong></p></li>
<li><p><strong>Configuration files</strong></p></li>
</ul>
<p>Source data files might look like this:</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">data.tsv</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>p id</p></th>
<th class="head"><p>gender</p></th>
<th class="head"><p>sample id</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PID001</p></td>
<td><p>f</p></td>
<td><p>SS001</p></td>
</tr>
<tr class="row-odd"><td><p>PID002</p></td>
<td><p>female</p></td>
<td><p>SS002</p></td>
</tr>
<tr class="row-even"><td><p>PID003</p></td>
<td><p>m</p></td>
<td><p>SS003</p></td>
</tr>
</tbody>
</table>
</section>
<section id="outputs">
<h3>Outputs<a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>Ingest log</strong> - A log file containing runtime details of an executed ingest
job</p></li>
<li><p><strong>Serialized stage output</strong> - The output of each stage execution in a
serializable form written to disk</p></li>
</ul>
</section>
<section id="extract-stage">
<h3>Extract Stage<a class="headerlink" href="#extract-stage" title="Permalink to this headline">¶</a></h3>
<p>The extract stage does the following:</p>
<ol class="arabic simple">
<li><p><strong>Retrieve</strong> - Fetch the source data files, local or remote, and read them
into memory</p></li>
<li><p><strong>Select</strong> - Extract the desired subset of data from the source data files</p></li>
<li><p><strong>Clean</strong> - Clean the source data (remove trailing spaces, select
substrings, etc)</p></li>
<li><p><strong>Map</strong> - Map the cleaned data to a set of standard Kids First attributes
and values</p></li>
</ol>
<p>The standard set of attributes and values are defined in the Kids First
Standard Concept Schema. (See <a class="reference external" href="https://github.com/kids-first/kf-lib-data-ingest/blob/master/kf_lib_data_ingest/common/concept_schema.py">kf_lib_data_ingest/common/concept_schema.py</a>
and <a class="reference external" href="https://github.com/kids-first/kf-lib-data-ingest/blob/master/kf_lib_data_ingest/common/constants.py">kf_lib_data_ingest/common/constants.py</a>)</p>
<p>Extract stage output might look like this:</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">data.tsv</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>CONCEPT.PARTICIPANT.ID</p></th>
<th class="head"><p>CONCEPT.PARTICIPANT.GENDER</p></th>
<th class="head"><p>CONCEPT.BIOSPECIMEN.ID</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PID001</p></td>
<td><p>Female</p></td>
<td><p>SS001</p></td>
</tr>
<tr class="row-odd"><td><p>PID002</p></td>
<td><p>Female</p></td>
<td><p>SS002</p></td>
</tr>
<tr class="row-even"><td><p>PID003</p></td>
<td><p>Male</p></td>
<td><p>SS003</p></td>
</tr>
</tbody>
</table>
</section>
<section id="transform-stage">
<h3>Transform Stage<a class="headerlink" href="#transform-stage" title="Permalink to this headline">¶</a></h3>
<p>Using a user-defined transform function, the transform stage combines the
individual tables created by the Extract Stage into a new set of “records”
tables where each table row contains all of the information for an instance of
a real world entity or event.</p>
<p><strong>Example:</strong> If one of your extracted files contains participant age and
consent information, and another extracted file contains participant race and
ethnicity information, join the two tables on the participant ID column to
produce a new participant records table that contains age, consent, race, and
ethnicity for your participants.</p>
<p><strong>Example:</strong> If half of your specimens are recorded in one file, and the other
half are recorded in another file, concatenate the extracted tables from those
two files together to produce one unified specimen records table.</p>
</section>
<section id="load-stage">
<h3>Load Stage<a class="headerlink" href="#load-stage" title="Permalink to this headline">¶</a></h3>
<p>The Load Stage builds target entity payloads from the records emitted by the
transform stage, determines whether each entity already exists in the target
service by its uniquely identifying components, and then submits each completed
entity payload to the target service.</p>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#generate-a-new-ingest-package">Generate a new ingest package</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#test">Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#add-another-extract-config">Add another extract config</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#modify-the-transform-module">Modify the Transform module</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#test-again">Test Again</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="design/overview.html">Design Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="design/value_principles.html">Value Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="design/extract_mapping.html">Extract Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="design/transform.html">Transform Stage</a></li>
<li class="toctree-l2"><a class="reference internal" href="design/load.html">Load Stage Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="design/warehousing.html">Remote Warehousing</a></li>
<li class="toctree-l2"><a class="reference internal" href="design/logs.html">Logs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/index.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/app.html">Kids First Ingest App</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/ingest_package.html">New Ingest Package Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/extract/index.html">Extract Stage</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/testing.html">Testing Your Ingest Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/extract/challenge_scenarios/index.html">Common Challenges when Extracting</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/sourcing_data/index.html">Sourcing Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/transform.html">Transform Stage</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/target_service_plugins/index.html">Target Service Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/load.html">Understanding the Load Stage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developer.html#set-up-development-environment">Set Up Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer.html#run-unit-tests">Run Unit Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer.html#build-documentation">Build Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference/index.html">Reference</a></li>
</ul>
</div>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="install.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Kids First

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>