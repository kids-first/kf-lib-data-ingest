

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Source Data stored by the Kids First Data Tracker &mdash; Kids First Data Ingest Libraries  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/other.css" type="text/css" />
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Source data stored in a PostgreSQL Database" href="query_sql.html" />
    <link rel="prev" title="Sourcing Data" href="index.html" />
    <link rel="stylesheet" href="https://kids-first.github.io/kf-sphinx-docs-theme/sphinx_kidsfirst_theme/static/css/kidsfirst.css" type="text/css" />
 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design/overview.html">Design Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../app.html">Kids First Ingest App</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingest_package.html">New Ingest Package Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extract/index.html">Extract Stage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing.html">Testing Your Ingest Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extract/challenge_scenarios/index.html">Common Challenges when Extracting</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Sourcing Data</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Source Data stored by the Kids First Data Tracker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get-your-developer-token">Get Your Developer Token</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-your-environment">Set Your Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update-your-extract-config-to-get-the-file-from-the-data-tracker">Update Your Extract Config to get the file from the Data Tracker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#try-it">Try It</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="query_sql.html">Source data stored in a PostgreSQL Database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../transform.html">Transform Stage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../target_service_plugins/index.html">Target Service Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../load.html">Understanding the Load Stage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Kids First Data Ingest Libraries</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Tutorial</a> &raquo;</li>
        
          <li><a href="index.html">Sourcing Data</a> &raquo;</li>
        
      <li>Source Data stored by the Kids First Data Tracker</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorial/sourcing_data/study_creator.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="source-data-stored-by-the-kids-first-data-tracker">
<span id="tutorial-study-creator"></span><h1>Source Data stored by the Kids First Data Tracker<a class="headerlink" href="#source-data-stored-by-the-kids-first-data-tracker" title="Permalink to this heading">¶</a></h1>
<p>If you are developing an ingest package for Kids First study data, then the
source data files for the study will be managed by the
<a class="reference external" href="https://kf-ui-data-tracker.kidsfirstdrc.org">Kids First Data Tracker</a>.</p>
<p>The <a class="reference internal" href="../extract/index.html#tutorial-extract-stage"><span class="std std-ref">Extract Stage</span></a> tutorial uses an unprotected file for example
purposes, but, in a more realistic scenario, the source data files for a study
would have been uploaded to the Data Tracker, and your ingest package would
need to be configured to access these files with the proper authorization
headers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Uploading files to the Data Tracker is outside of the scope of this
tutorial. Read the <a class="reference external" href="https://kids-first.github.io/kf-api-study-creator/">Study Creator API docs</a> or visit the <a class="reference external" href="https://kf-ui-data-tracker.kidsfirstdrc.org">Data
Tracker web app</a> to learn
more about how to do that.</p>
</div>
<section id="get-your-developer-token">
<h2>Get Your Developer Token<a class="headerlink" href="#get-your-developer-token" title="Permalink to this heading">¶</a></h2>
<p>All source data files in the Data Tracker are protected by some sort of
authentication depending on the type of user trying to access them. As an
ingest package developer, you will need a developer token to access files. The
developer token grants authorization to download any source data file.</p>
<p>To generate a token, go to <a class="reference external" href="https://kf-ui-data-tracker.kidsfirstdrc.org/tokens">https://kf-ui-data-tracker.kidsfirstdrc.org/tokens</a></p>
</section>
<section id="set-your-environment">
<h2>Set Your Environment<a class="headerlink" href="#set-your-environment" title="Permalink to this heading">¶</a></h2>
<p>Now that you have your token, you’re going to store it in your shell
environment so that the ingest app can read it and use it when fetching files
through the Study Creator API.</p>
<p>In the configuration for your local shell environment, add the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">KF_STUDY_CREATOR_API_TOKEN</span><span class="o">=</span>&lt;YOUR_TOKEN&gt;
</pre></div>
</div>
<p>Be careful with this token and make sure to keep it secret.</p>
</section>
<section id="update-your-extract-config-to-get-the-file-from-the-data-tracker">
<h2>Update Your Extract Config to get the file from the Data Tracker<a class="headerlink" href="#update-your-extract-config-to-get-the-file-from-the-data-tracker" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">clinical.tsv</span></code> and <code class="docutils literal notranslate"><span class="pre">family_and_phenotype.tsv</span></code> source data files have
already been uploaded to the <code class="docutils literal notranslate"><span class="pre">SD_ME0WME0W</span></code> study via the Data Tracker
service.</p>
<p>For example, the Data Tracker URL for the <code class="docutils literal notranslate"><span class="pre">family_and_phenotypes.tsv</span></code>
file is:</p>
<p><a class="reference external" href="https://kf-study-creator.kidsfirstdrc.org/download/study/SD_ME0WME0W/file/SF_HH5PMCJX/version/FV_5H7MEHG2">https://kf-study-creator.kidsfirstdrc.org/download/study/SD_ME0WME0W/file/SF_HH5PMCJX/version/FV_5H7MEHG2</a></p>
<p>Replace the value of <code class="docutils literal notranslate"><span class="pre">source_data_url</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">extract_config.py</span></code>,
with the Data Tracker URL above. Note that you will not be able to manually
download from that URL without the correct authorization headers.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># family_and_phenotype.tsv</span>
<span class="n">source_data_url</span> <span class="o">=</span> <span class="s1">&#39;https://kf-study-creator.kidsfirstdrc.org/download/study/SD_ME0WME0W/file/SF_HH5PMCJX/version/FV_5H7MEHG2&#39;</span>
</pre></div>
</div>
</section>
<section id="try-it">
<h2>Try It<a class="headerlink" href="#try-it" title="Permalink to this heading">¶</a></h2>
<p>If you try running ingest and the file was fetched successfully, you should see
something like this in your log:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>2019-04-24 11:19:31,719 - FileRetriever - INFO - Selected `token` authentication to fetch https://kf-study-creator.kidsfirstdrc.org/download/study/SD_ME0WME0W/file/SF_HH5PMCJX/version/FV_5H7MEHG2
2019-04-24 11:19:32,269 - kf_lib_data_ingest.network.utils - INFO - Successfully fetched https://kf-study-creator.kidsfirstdrc.org/download/study/SD_ME0WME0W/file/SF_HH5PMCJX/version/FV_5H7MEHG2 with original file name &quot;family_and_phenotype.tsv&quot;
</pre></div>
</div>
<p><strong>Don’t worry if your ingest package fails validation. You will learn how to
fix this in a later section.</strong></p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="query_sql.html" class="btn btn-neutral float-right" title="Source data stored in a PostgreSQL Database" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Sourcing Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Kids First

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>